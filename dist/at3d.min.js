function ATCamera(e){var t=mat4.create(),r=mat4.create();this.lookAt=function(e,r,a){mat4.lookAt(t,e,r,a)},this.getMatrizVisualizacao=function(){return t},this.getMatrizProjecao=function(){return r},this.getNome=function(){return e}}function ATCena3D(){var e=[];this.criarObjeto,this.removerObjeto,this.acoplarObjeto,this.desacoplarObjeto,this.desenhar,this.criarObjeto=function(t){var r=new ATObjeto3D(t);e.push(r)},this.acoplarObjeto=function(e){null!=e.cena&&e.cena!=this}}function ATEngine(e){var t=this,r=(document.getElementById(e),this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")),a=[new ATCena3D("cena")],n=[new ATCamera("camera")],i={},o=function(){for(var e in t.pendenciasAssincronas)if(!t.pendenciasAssincronas[e])return;t.dispatchEvent(new Event("pronta"))};this.carregarShaders=function(e){for(var t in e){var a=new ATShaderProgram(t,r);i[t]=a,this.pendenciasAssincronas[a]=!1;var n=e[t][0],c=e[t][1];a.carregarShaders(n,c,function(e){i[e.programa]=!0,o()})}},this.pronta=function(e){this.addEventListener("pronta",function(){e()})},this.criarCena=function(e){var t=new ATCena3D(e);return a.push(t),t},this.criarCena("cena"),this.criarCamera=function(e){var t=new ATCamera(e);return n.push(t),t},this.criarCamera("camera"),this.removerCena=function(e){var t=a.indexOf(e);-1!=t&&(a.splice(t,1),e.destruir())},this.fullScreen=function(){}}function ATEvent(){}function ATFragmentShader(){}function ATGeometry(){}function ATKeyboard(){}function ATMaterialCor(){}function ATMaterial(){}function ATMaterialTextura(){}function ATMouse(){}function ATObjeto3D(){this.lerOBJ=function(){}}function ATShader(e){this.caminho=e}function ATShaderProgram(e,t){var r,a,n,i={},o={},c=[],s=1,h=2,u=3,f=4,l=5,A=6,T=this,d=function(e,r,a){var n=t.createShader(r);$.get(e,function(e){t.shaderSource(n,e),t.compileShader(n),c.push(e),a()})};this.carregarShaders=function(e,c,p){vShaderCarregado=!1,fShaderCarregado=!1,r=d(e,t.VERTEX_SHADER,function(){fShaderCarregado?v():vShaderCarregado=!0}),a=d(c,t.FRAGMENT_SHADER,function(){vShaderCarregado?v():fShaderCarregado=!0});var v=function(){n=t.createProgram(),t.attachShader(n,r),t.attachShader(n,a),t.linkProgram(n);for(var e=0;e<codigo.length;e++)for(var c=codigo[e].split("\n"),d=c.length,v=0;d>v;v++)if(c.length>0){var g=c[v].split(" ");switch(g[0]){case"attribute":i[g[2]]=[t.getAttribLocation(n,g[2]),parseInt(g[1].substring(3,1))];break;case"uniform":switch(o[g[2]]=[t.getUniformLocation(n,g[2])],g[1]){case"float":o[g[2]].push(s);break;case"mat3":o[g[2]].push(l);break;case"mat4":o[g[2]].push(A);break;case"vec2":o[g[2]].push(h);break;case"vec3":o[g[2]].push(u);break;case"vec4":o[g[2]].push(f)}}}p({programa:T})}},this.usar=function(){}}function ATTrackball(){}function ATVertexShader(){}var ATUtils={};ATUtils.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},ATEvent.ERRO="erro",ATEvent.COMPLETO="completo",ATUtils.inherits(ATEvent,Event),ATUtils.inherits(ATFragmentShader,ATShader),ATUtils.inherits(ATMaterialCor,ATMaterial),ATUtils.inherits(ATMaterialTextura,ATMaterial);var ATUtils={};ATUtils.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},ATUtils.inherits(ATVertexShader,ATShader);